@font-face {
    font-family: "Bangers";
    src: url("../fonts/Bangers-Regular.woff2") format("woff2");
    font-weight: 400;
    font-style: normal;
    font-display: swap;
}

@font-face {
    font-family: "Black Ops One";
    src: url("../fonts/BlackOpsOne-Regular.woff2") format("woff2");
    font-weight: 400;
    font-style: normal;
    font-display: swap;
}

@font-face {
    font-family: "Cinzel Decorative";
    src: url("../fonts/CinzelDecorative-Bold.woff2") format("woff2");
    font-weight: 700;
    font-style: normal;
    font-display: swap;
}

@font-face {
    font-family: "Creepster";
    src: url("../fonts/Creepster-Regular.woff2") format("woff2");
    font-weight: 400;
    font-style: normal;
    font-display: swap;
}

@font-face {
    font-family: "Eater";
    src: url("../fonts/Eater-Regular.woff2") format("woff2");
    font-weight: 400;
    font-style: normal;
    font-display: swap;
}

@font-face {
    font-family: "MedievalSharp";
    src: url("../fonts/MedievalSharp-Regular.woff2") format("woff2");
    font-weight: 400;
    font-style: normal;
    font-display: swap;
}

@font-face {
    font-family: "Metal Mania";
    src: url("../fonts/MetalMania-Regular.woff2") format("woff2");
    font-weight: 400;
    font-style: normal;
    font-display: swap;
}

@font-face {
    font-family: "Nosifer";
    src: url("../fonts/Nosifer-Regular.woff2") format("woff2");
    font-weight: 400;
    font-style: normal;
    font-display: swap;
}

@font-face {
    font-family: "Shojumaru";
    src: url("../fonts/Shojumaru-Regular.woff2") format("woff2");
    font-weight: 400;
    font-style: normal;
    font-display: swap;
}

@font-face {
    font-family: "Special Elite";
    src: url("../fonts/SpecialElite-Regular.woff2") format("woff2");
    font-weight: 400;
    font-style: normal;
    font-display: swap;
}

/* IMPORTANT: position: fixed !important ensures the overlay
   floats over the entire screen without pushing the Foundry UI.
*/
.crit-overlay-app {
    position: fixed !important;
    top: 0;
    left: 0;
    width: 100vw !important;
    height: 100vh !important;
    z-index: 99999; /* Above everything */
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    pointer-events: none; /* Allows clicking through */
    margin: 0 !important;

    /* Absolute centering */
    display: flex !important;
    align-items: center;
    justify-content: center;
}

/* Content container */
.crit-splash-container {
    position: relative;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

/* Main Text */
.crit-title {
    font-family: "Bangers", sans-serif;
    font-size: 8rem;
    font-weight: 900;
    text-transform: uppercase;
    line-height: 1;
    opacity: 0;
    animation: crit-explode 3s ease-out forwards;
    padding: 20px 40px;
    border-radius: 8px;
}

/* --- Fill Modes --- */

/* Box: text in a padded box (default) */
.crit-fill-box .crit-title {
    display: inline-block;
}

/* Band: full width horizontal band */
.crit-fill-band {
    width: 100vw;
    flex-direction: row;
}
.crit-fill-band .crit-title {
    width: 100%;
    border-radius: 0;
    text-align: center;
    display: flex;
    justify-content: center;
    align-items: center;
}

/* Full: entire screen filled */
.crit-fill-full {
    width: 100vw;
    height: 100vh;
    border-radius: 0;
}
.crit-fill-full .crit-title {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 0;
    background-color: transparent !important;
}

/* --- Critical Image & Video Mode --- */
.crit-image, 
.crit-video {
    opacity: 0;
    animation: crit-explode 3s ease-out forwards;
    pointer-events: none;
    object-fit: contain;
    border: none !important;
    outline: none !important;
    box-shadow: none !important;
    background: transparent !important;
}

   but for now we reuse crit-explode to match image style.
.crit-image-small, .crit-video-small { max-height: 20vh; }
.crit-image-normal, .crit-video-normal { max-height: 35vh; }
.crit-image-large, .crit-video-large { max-height: 55vh; }
.crit-image-extra-large, .crit-video-extra-large { max-height: 75vh; }

/* --- Critical Art (Player Artwork behind text) --- */
.crit-art {
    position: absolute;
    top: 50%;
    left: 50%;
    --art-x: 0px;
    --art-y: 0px;
    --art-offset-x: 0px;
    --art-offset-y: 0px;
    translate: calc(-50% + var(--art-x) + var(--art-offset-x)) calc(-50% + var(--art-y) + var(--art-offset-y));
    object-fit: contain;
    opacity: 0;
    animation: crit-explode 3s ease-out forwards;
    pointer-events: none;
    z-index: 0;
    border: none !important;
    outline: none !important;
    box-shadow: none !important;
    background: transparent !important;
}

.crit-title,
.crit-image,
.crit-video {
    z-index: 1;
    position: relative;
}

/* Art Sizes */
.crit-art-size-very-small { max-height: 20vh; }
.crit-art-size-small { max-height: 35vh; }
.crit-art-size-normal { max-height: 55vh; }
.crit-art-size-large { max-height: 80vh; }

/* Horizontal Positions (X axis) */
.crit-art-left-out { --art-x: -40vw; }
.crit-art-left { --art-x: -20vw; }
.crit-art-middle { --art-x: 0px; }
.crit-art-right { --art-x: 20vw; }
.crit-art-right-out { --art-x: 40vw; }

/* Vertical Positions (Y axis) */
.crit-art-y-top-out { --art-y: -35vh; }
.crit-art-y-top { --art-y: -15vh; }
.crit-art-y-middle { --art-y: 0px; }
.crit-art-y-bottom { --art-y: 15vh; }
.crit-art-y-bottom-out { --art-y: 35vh; }

/* --- Styles by Type --- */

/* Duality (Gold) - text-shadow only, color comes from settings */
.duality-style .crit-title {
    text-shadow:
        0 0 10px currentColor,
        0 0 20px rgba(0, 0, 0, 0.5),
        4px 4px 0px #000;
}

/* Adversary (Red) - text-shadow only, color comes from settings */
.adversary-style .crit-title {
    text-shadow:
        0 0 10px currentColor,
        0 0 20px rgba(0, 0, 0, 0.5),
        4px 4px 0px #000;
}

/* --- Animations --- */

@keyframes crit-explode {
    0% { opacity: 0; transform: scale(0.1) rotate(-10deg); }
    10% { opacity: 1; transform: scale(1.2) rotate(0deg); }
    20% { transform: scale(1.0); }
    85% { opacity: 1; transform: scale(1.1); filter: blur(0px); }
    100% { opacity: 0; transform: scale(2.0); filter: blur(10px); }
}

/* --- Crit FX Styles (Moved from JS) --- */
#dh-crit-fx-layer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    pointer-events: none;
    z-index: 100000;
    overflow: hidden;
}

#dh-crit-fx-border {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    pointer-events: none;
    z-index: 200000;
    box-sizing: border-box;
    border: 0px solid transparent;
    transition: border 0.3s ease;
    display: none;
    --cfx-border-rgb: 255, 0, 0;
}

#dh-crit-fx-border.active {
    display: block;
    animation: cfx-pulse-border 2s infinite;
}

.cfx-shard-realistic {
    position: absolute;
    background: rgba(220, 240, 255, 0.6);
    box-shadow: inset 0 0 5px rgba(255, 255, 255, 0.8), 0 0 5px rgba(0,0,0,0.2);
    pointer-events: none;
    will-change: transform;
    z-index: 100002;
}

@keyframes cfx-pulse-border { 0% { box-shadow: inset 0 0 20px rgba(var(--cfx-border-rgb), 0.5); border-color: rgba(var(--cfx-border-rgb), 0.8); } 50% { box-shadow: inset 0 0 50px rgba(var(--cfx-border-rgb), 0.8); border-color: rgba(var(--cfx-border-rgb), 1); } 100% { box-shadow: inset 0 0 20px rgba(var(--cfx-border-rgb), 0.5); border-color: rgba(var(--cfx-border-rgb), 0.8); } }
@keyframes cfx-pulse-anim { 0% { transform: scale(1) rotate(0deg); } 50% { transform: scale(var(--cfx-pulse-scale)); } 100% { transform: scale(1) rotate(0deg); } }

/* =========================================
   Modern Config Dialog Styles
   ========================================= */

:root {
    --crit-accent: #ff6400;
    --crit-bg-dark: rgba(0, 0, 0, 0.2);
    --crit-bg-input: rgba(0, 0, 0, 0.3);
    --crit-border-light: rgba(255, 255, 255, 0.1);
}

.dh-crit-config,
.dh-crit-text-config,
.dh-crit-sound-config,
.dh-crit-art-config,
.dh-crit-user-config {
    font-family: "Signika", sans-serif;
}

/* --- Tabs --- */
.dh-crit-config .tabs,
.dh-crit-text-config .tabs,
.dh-crit-art-config .tabs {
    border-bottom: 2px solid var(--crit-border-light);
    margin-bottom: 1rem;
}

.dh-crit-config .tabs a,
.dh-crit-text-config .tabs a,
.dh-crit-art-config .tabs a {
    position: relative;
    padding: 8px 20px;
    border: none;
    background: transparent;
    color: #b0b0b0;
    transition: all 0.2s ease;
    font-weight: 600;
    border-radius: 4px 4px 0 0;
}

.dh-crit-config .tabs a:hover,
.dh-crit-text-config .tabs a:hover,
.dh-crit-art-config .tabs a:hover {
    color: #ffffff;
    background: rgba(255, 255, 255, 0.05);
    text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
}

.dh-crit-config .tabs a.active,
.dh-crit-text-config .tabs a.active,
.dh-crit-art-config .tabs a.active {
    color: #ffffff;
    background: var(--crit-bg-dark);
    border-bottom: 3px solid var(--crit-accent);
}

/* --- Tab Content --- */
.dh-crit-config .tab,
.dh-crit-text-config .tab,
.dh-crit-art-config .tab {
    display: none;
    animation: fadein 0.3s ease-in-out;
}
.dh-crit-config .tab.active,
.dh-crit-text-config .tab.active,
.dh-crit-art-config .tab.active { display: block; }

@keyframes fadein {
    from { opacity: 0; transform: translateY(-5px); }
    to { opacity: 1; transform: translateY(0); }
}

/* --- Notes Box --- */
.dh-crit-config .notes,
.dh-crit-text-config .notes,
.dh-crit-sound-config .notes,
.dh-crit-art-config .notes,
.dh-crit-user-config .notes {
    margin-bottom: 1.5rem;
    padding: 10px 12px;
    background: linear-gradient(90deg, rgba(30, 144, 255, 0.15), rgba(30, 144, 255, 0.05));
    border-left: 4px solid #1e90ff;
    border-radius: 4px;
    color: #e0e0e0;
    font-size: 0.95em;
    display: flex;
    align-items: center;
    gap: 0.8em;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

.dh-crit-config .notes i,
.dh-crit-text-config .notes i,
.dh-crit-sound-config .notes i,
.dh-crit-art-config .notes i,
.dh-crit-user-config .notes i {
    color: #1e90ff;
    font-size: 1.2em;
}

/* --- Form Groups (Modern Layout) --- */
.dh-crit-config .form-group,
.dh-crit-text-config .form-group,
.dh-crit-sound-config .form-group,
.dh-crit-art-config .form-group,
.dh-crit-user-config .form-group {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 0.8rem;
    padding: 4px 0;
    border-bottom: 1px solid rgba(255,255,255,0.03);
}

.dh-crit-config .form-group label,
.dh-crit-text-config .form-group label,
.dh-crit-sound-config .form-group label,
.dh-crit-art-config .form-group label,
.dh-crit-user-config .form-group label {
    flex: 2;
    font-weight: 600;
    color: #ddd;
}

.dh-crit-config .form-group .form-fields,
.dh-crit-text-config .form-group .form-fields,
.dh-crit-sound-config .form-group .form-fields,
.dh-crit-art-config .form-group .form-fields,
.dh-crit-user-config .form-group .form-fields {
    flex: 3;
    display: flex;
    /*justify-content: flex-end; /* Aligns the group (button + text) to the right */
    align-items: center;
    gap: 0; /* Gap removed because we will use margin on the hint */
}

/* Inputs styling */
.dh-crit-config input[type="text"],
.dh-crit-config input[type="number"],
.dh-crit-config select,
.dh-crit-text-config input[type="text"],
.dh-crit-text-config input[type="number"],
.dh-crit-text-config select,
.dh-crit-art-config input[type="text"],
.dh-crit-art-config input[type="number"],
.dh-crit-art-config select,
.dh-crit-user-config input[type="text"],
.dh-crit-user-config input[type="number"],
.dh-crit-user-config select {
    background: var(--crit-bg-input);
    border: 1px solid #444;
    color: #fff;
    border-radius: 4px;
    padding: 4px 8px;
    transition: border-color 0.2s;
    height: 28px;
    flex: 1;
    max-width: 100%;
}

/* FIX: Dark background for Select Options */
.dh-crit-config select option,
.dh-crit-text-config select option,
.dh-crit-art-config select option,
.dh-crit-user-config select option {
    background-color: #2b2b2b;
    color: #f0f0f0;
}

.dh-crit-config select,
.dh-crit-text-config select,
.dh-crit-art-config select,
.dh-crit-user-config select {
    cursor: pointer;
    pointer-events: auto;
}

.dh-crit-config input:focus,
.dh-crit-config select:focus,
.dh-crit-text-config input:focus,
.dh-crit-text-config select:focus,
.dh-crit-sound-config input:focus,
.dh-crit-sound-config select:focus,
.dh-crit-art-config input:focus,
.dh-crit-art-config select:focus,
.dh-crit-user-config input:focus,
.dh-crit-user-config select:focus {
    outline: none;
    border-color: var(--crit-accent);
    box-shadow: 0 0 5px rgba(255, 100, 0, 0.3);
}

/* Color Picker tweak */
.dh-crit-config input[type="color"],
.dh-crit-text-config input[type="color"],
.dh-crit-user-config input[type="color"] {
    background: none;
    border: none;
    width: 40px;
    height: 30px;
    padding: 0;
    cursor: pointer;
}

/* --- Range Slider --- */
.dh-crit-config input[type="range"],
.dh-crit-text-config input[type="range"],
.dh-crit-user-config input[type="range"] {
    accent-color: var(--crit-accent);
    width: 100%;
}

/* --- Modern Toggle Switch (CSS Only) --- */
.slide-toggle {
    position: relative;
    display: inline-block;

    flex: 0 0 50px;
    height: 24px;
    margin-right: 0;
}

/* Override .form-group label { flex: 2 } which has higher specificity */
.dh-crit-config .form-group .form-fields .slide-toggle,
.dh-crit-text-config .form-group .form-fields .slide-toggle,
.dh-crit-sound-config .form-group .form-fields .slide-toggle,
.dh-crit-user-config .form-group .form-fields .slide-toggle {
    flex: 0 0 50px;
}

.slide-toggle input {
    opacity: 0;
    width: 0;
    height: 0;
}

.slider {
    /* FIX: Fixed width of 50px */
    width: 50px;    
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #555;
    transition: .3s;
    border-radius: 24px;
    box-shadow: inset 0 2px 4px rgba(0,0,0,0.4);
}

.slider:before {
    position: absolute;
    content: "";
    height: 18px;
    width: 18px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    transition: .3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    border-radius: 50%;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

input:checked + .slider {
    background-color: var(--crit-accent);
}

input:checked + .slider:before {
    transform: translateX(26px); /* Adjusted for 50px width */
}

input:focus + .slider {
    box-shadow: 0 0 1px var(--crit-accent);
}

/* Hints (Explanatory Text) */
.dh-crit-text-config .hint,
.dh-crit-sound-config .hint,
.dh-crit-user-config .hint {
    font-size: 0.85em;
    color: #b0b0b0;
    font-style: italic;
    line-height: 1.2;
    text-align: left; /* Aligns text to the left (near the button) */
    margin-left: 10px; /* Space between button and text */
    flex: 1; /* Occupies remaining space */
}

/* --- Use Image Row --- */
.dh-crit-text-config .use-image-row {
    background: linear-gradient(90deg, rgba(255, 255, 255, 0.04), transparent);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 6px;
    padding: 8px 12px;
    margin-bottom: 1rem;
}

.dh-crit-text-config .use-image-row label i.fa-image {
    color: var(--crit-accent);
    margin-right: 4px;
}

/* --- Sound Enable Row --- */
.dh-crit-sound-config .sound-enable-row {
    background: linear-gradient(90deg, rgba(255, 255, 255, 0.04), transparent);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 6px;
    padding: 8px 12px;
    margin-bottom: 1rem;
}

.dh-crit-sound-config .sound-enable-row label i.fa-volume-up {
    color: var(--crit-accent);
    margin-right: 4px;
}

/* --- Field Hint (below file picker) --- */
.dh-crit-sound-config .field-hint {
    font-size: 0.85em;
    color: #b0b0b0;
    font-style: italic;
    margin: -0.4rem 0 1rem 0;
    padding-left: 2px;
}

/* Footer Buttons */
.dh-crit-config .form-footer,
.dh-crit-text-config .form-footer,
.dh-crit-sound-config .form-footer,
.dh-crit-art-config .form-footer,
.dh-crit-user-config .form-footer {
    margin-top: 1.5rem;
    padding-top: 1rem;
    border-top: 1px solid var(--crit-border-light);
    display: flex;
    gap: 8px;
}

.dh-crit-config .form-footer button,
.dh-crit-text-config .form-footer button,
.dh-crit-sound-config .form-footer button,
.dh-crit-art-config .form-footer button,
.dh-crit-user-config .form-footer button {
    flex: 1;
}

.dh-crit-config button,
.dh-crit-text-config button,
.dh-crit-sound-config button,
.dh-crit-art-config button,
.dh-crit-user-config button {
    background: linear-gradient(to bottom, #4a4a4a, #2b2b2b);
    border: 1px solid #111;
    box-shadow: 0 1px 3px rgba(0,0,0,0.5);
    color: #f0f0f0;
    padding: 8px 0;
    transition: all 0.2s;
}

.dh-crit-config button:hover,
.dh-crit-text-config button:hover,
.dh-crit-sound-config button:hover,
.dh-crit-art-config button:hover,
.dh-crit-user-config button:hover {
    background: linear-gradient(to bottom, #5a5a5a, #3b3b3b);
    color: #fff;
    box-shadow: 0 0 8px rgba(255, 255, 255, 0.2);
}

/* --- Critical Art Config: Player List (scrollable) --- */
.crit-art-player-list {
    max-height: 400px;
    overflow-y: auto;
    padding-right: 4px;
}

/* --- Critical Art Config: Player Cards --- */
.crit-art-player-card {
    background: var(--crit-bg-dark);
    border: 1px solid var(--crit-border-light);
    border-radius: 6px;
    padding: 10px 12px;
    margin-bottom: 0.5rem;
}

.crit-art-player-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 0.6rem;
    font-weight: 700;
    font-size: 1.05em;
    color: #fff;
}

.crit-art-color-dot {
    display: inline-block;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    border: 1px solid rgba(255,255,255,0.3);
    flex-shrink: 0;
}

/* =========================================
   Per-User Override Config Styles
   ========================================= */

/* Scrollable user list */
.crit-user-list {
    max-height: 500px;
    overflow-y: auto;
    padding-right: 4px;
}

.crit-user-list::-webkit-scrollbar {
    width: 8px;
}
.crit-user-list::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 4px;
}
.crit-user-list::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 4px;
}
.crit-user-list::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.3);
}

/* User card */
.crit-user-card {
    background: var(--crit-bg-dark);
    border: 1px solid var(--crit-border-light);
    border-radius: 6px;
    padding: 10px 12px;
    margin-bottom: 0.8rem;
}

/* User header */
.crit-user-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 0.8rem;
}

.crit-user-name {
    font-weight: 700;
    font-size: 1.05em;
    color: #fff;
    flex: 1;
}

/* Override badges */
.crit-user-badges {
    display: flex;
    gap: 4px;
}

.crit-user-badge {
    font-size: 0.7em;
    padding: 2px 6px;
    border-radius: 3px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.badge-text {
    background: rgba(30, 144, 255, 0.25);
    color: #1e90ff;
    border: 1px solid rgba(30, 144, 255, 0.5);
}

.badge-fx {
    background: rgba(255, 100, 0, 0.25);
    color: var(--crit-accent);
    border: 1px solid rgba(255, 100, 0, 0.5);
}

.badge-sound {
    background: rgba(138, 43, 226, 0.25);
    color: #a855f7;
    border: 1px solid rgba(138, 43, 226, 0.5);
}

.badge-art {
    background: rgba(34, 197, 94, 0.25);
    color: #22c55e;
    border: 1px solid rgba(34, 197, 94, 0.5);
}

/* Toggle buttons row */
.crit-user-toggles {
    display: flex;
    gap: 6px;
    margin-bottom: 0.4rem;
}

.dh-crit-user-config .crit-user-toggle-btn {
    flex: 1;
    background: linear-gradient(to bottom, #3a3a3a, #2b2b2b);
    border: 1px solid #444;
    color: #ccc;
    padding: 5px 8px;
    border-radius: 4px;
    font-size: 0.85em;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
}

.dh-crit-user-config .crit-user-toggle-btn:hover {
    background: linear-gradient(to bottom, #4a4a4a, #3b3b3b);
    border-color: var(--crit-accent);
    color: #fff;
}

.dh-crit-user-config .crit-user-toggle-btn.expanded {
    background: linear-gradient(to bottom, var(--crit-accent), #d55400);
    border-color: var(--crit-accent);
    color: #fff;
    box-shadow: 0 0 6px rgba(255, 100, 0, 0.3);
}

/* Collapsible sections */
.crit-user-section {
    background: rgba(0, 0, 0, 0.15);
    border: 1px solid rgba(255, 255, 255, 0.06);
    border-radius: 4px;
    padding: 10px;
    margin-top: 0.6rem;
}

.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.8rem;
    padding-bottom: 0.4rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
}

.section-header h4 {
    margin: 0;
    font-size: 0.95em;
    color: #fff;
    font-weight: 600;
}

.section-header h4 i {
    margin-right: 4px;
    color: var(--crit-accent);
}

/* Clear button */
.dh-crit-user-config .crit-user-clear-btn {
    background: transparent !important;
    border: 1px solid rgba(255, 80, 80, 0.4) !important;
    color: #ff6666 !important;
    padding: 3px 8px !important;
    border-radius: 3px;
    font-size: 0.8em;
    cursor: pointer;
    transition: all 0.2s;
    box-shadow: none !important;
}

.dh-crit-user-config .crit-user-clear-btn:hover {
    background: rgba(255, 80, 80, 0.15) !important;
    border-color: #ff6666 !important;
    color: #ff4444 !important;
    box-shadow: none !important;
}

/* Use image / sound enable rows inside user sections */
.dh-crit-user-config .use-image-row,
.dh-crit-user-config .sound-enable-row {
    background: linear-gradient(90deg, rgba(255, 255, 255, 0.04), transparent);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 6px;
    padding: 8px 12px;
    margin-bottom: 1rem;
}

.dh-crit-user-config .use-image-row label i.fa-image,
.dh-crit-user-config .sound-enable-row label i.fa-volume-up {
    color: var(--crit-accent);
    margin-right: 4px;
}

/* Per-user preview button */
.dh-crit-user-config .crit-user-preview-btn {
    flex-shrink: 0;
    width: 28px;
    height: 28px;
    padding: 0 !important;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    background: linear-gradient(to bottom, #3a3a3a, #2b2b2b) !important;
    border: 1px solid #444 !important;
    color: #aaa !important;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 0.75em;
}

.dh-crit-user-config .crit-user-preview-btn:hover {
    background: linear-gradient(to bottom, var(--crit-accent), #d55400) !important;
    border-color: var(--crit-accent) !important;
    color: #fff !important;
    box-shadow: 0 0 6px rgba(255, 100, 0, 0.4) !important;
}


/* =========================================
   Critical Configuration Modal Styles
   ========================================= */

.dh-crit-config-modal {
    font-family: "Signika", sans-serif;
}

.dh-crit-config-modal .notes {
    margin-bottom: 1.5rem;
    padding: 10px 12px;
    background: linear-gradient(90deg, rgba(30, 144, 255, 0.15), rgba(30, 144, 255, 0.05));
    border-left: 4px solid #1e90ff;
    border-radius: 4px;
    color: #e0e0e0;
    font-size: 0.95em;
    display: flex;
    align-items: center;
    gap: 0.8em;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

.dh-crit-config-modal .notes i {
    color: #1e90ff;
    font-size: 1.2em;
}

.config-list {
    display: flex;
    flex-direction: column;
    gap: 0.8rem;
    margin-bottom: 1.5rem;
    max-height: 500px;
    overflow-y: auto;
    padding-right: 8px;
}

.default-entries-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-bottom: 0.8rem;
}

.config-list::-webkit-scrollbar {
    width: 8px;
}

.config-list::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 4px;
}

.config-list::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 4px;
}

.config-list::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.3);
}

.config-entry {
    background: var(--crit-bg-dark);
    border: 1px solid var(--crit-border-light);
    border-radius: 6px;
    padding: 12px;
}

.config-entry.default-entry {
    background: linear-gradient(90deg, rgba(255, 215, 0, 0.08), rgba(255, 215, 0, 0.02));
    border-color: rgba(255, 215, 0, 0.3);
}

.entry-row {
    display: grid;
    grid-template-columns: 2.5fr 1.8fr 2.5fr 1.8fr auto;
    gap: 12px;
    align-items: end;
}

.default-entry .entry-row {
    grid-template-columns: 1fr auto;
    gap: 8px;
}

.entry-field {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.entry-field label {
    font-size: 0.85em;
    font-weight: 600;
    color: #ddd;
}

.entry-field .config-name-label {
    font-size: 1.1em;
    font-weight: 700;
    color: #fff;
    padding: 6px 0;
}

.entry-field input[type="text"],
.entry-field select {
    background: var(--crit-bg-input);
    border: 1px solid #444;
    color: #fff;
    border-radius: 4px;
    padding: 6px 8px;
    transition: border-color 0.2s;
    height: 32px;
}

.entry-field input:focus,
.entry-field select:focus {
    outline: none;
    border-color: var(--crit-accent);
    box-shadow: 0 0 5px rgba(255, 100, 0, 0.3);
}

.entry-field input[readonly] {
    background: rgba(0, 0, 0, 0.3);
    color: #999;
    cursor: not-allowed;
}

.entry-field select:disabled {
    background: rgba(0, 0, 0, 0.3);
    color: #999;
    cursor: not-allowed;
}

.entry-field select option {
    background-color: #2b2b2b;
    color: #f0f0f0;
}

/* Adversary Drop Zone */
.adversary-drop-zone {
    background: var(--crit-bg-input);
    border: 2px dashed #666;
    border-radius: 4px;
    padding: 6px 8px;
    min-height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    position: relative;
}

.adversary-drop-zone.drag-over {
    border-color: var(--crit-accent);
    background: rgba(255, 100, 0, 0.1);
}

.adversary-drop-zone .placeholder {
    color: #888;
    font-size: 0.9em;
    font-style: italic;
}

.adversary-drop-zone .adversary-name {
    color: #fff;
    font-weight: 600;
}

.clear-adversary-btn {
    position: absolute;
    right: 4px;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(255, 80, 80, 0.2) !important;
    border: 1px solid rgba(255, 80, 80, 0.4) !important;
    color: #ff6666 !important;
    padding: 2px 6px !important;
    border-radius: 3px;
    font-size: 0.75em;
    cursor: pointer;
    transition: all 0.2s;
}

.clear-adversary-btn:hover {
    background: rgba(255, 80, 80, 0.3) !important;
    border-color: #ff6666 !important;
    color: #ff4444 !important;
}

/* Action Buttons */
.entry-actions {
    display: flex;
    gap: 4px;
    align-items: center;
}

.action-btn,
.delete-entry-btn {
    background: linear-gradient(to bottom, #3a3a3a, #2b2b2b) !important;
    border: 1px solid #444 !important;
    color: #aaa !important;
    padding: 6px 8px !important;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 0.9em;
    min-width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.action-btn:hover {
    background: linear-gradient(to bottom, var(--crit-accent), #d55400) !important;
    border-color: var(--crit-accent) !important;
    color: #fff !important;
    box-shadow: 0 0 6px rgba(255, 100, 0, 0.4) !important;
}

.delete-entry-btn {
    background: linear-gradient(to bottom, #4a2020, #2b1515) !important;
    border-color: #662020 !important;
    color: #ff6666 !important;
    min-width: 32px;
    height: 32px;
}

.delete-entry-btn:hover {
    background: linear-gradient(to bottom, #662020, #4a2020) !important;
    border-color: #ff6666 !important;
    color: #ff4444 !important;
    box-shadow: 0 0 6px rgba(255, 100, 100, 0.4) !important;
}

.dh-crit-config-modal .form-footer {
    margin-top: 1.5rem;
    padding-top: 1rem;
    border-top: 1px solid var(--crit-border-light);
    display: flex;
    gap: 8px;
}

.dh-crit-config-modal .form-footer button {
    flex: 1;
    background: linear-gradient(to bottom, #4a4a4a, #2b2b2b);
    border: 1px solid #111;
    box-shadow: 0 1px 3px rgba(0,0,0,0.5);
    color: #f0f0f0;
    padding: 10px 0;
    transition: all 0.2s;
    border-radius: 4px;
    cursor: pointer;
}

.dh-crit-config-modal .form-footer button:hover {
    background: linear-gradient(to bottom, #5a5a5a, #3b3b3b);
    color: #fff;
    box-shadow: 0 0 8px rgba(255, 255, 255, 0.2);
}

.add-entry-btn {
    background: linear-gradient(to bottom, #2a4a2a, #1b2b1b) !important;
    border-color: #2a5a2a !important;
    color: #66ff66 !important;
}

.add-entry-btn:hover {
    background: linear-gradient(to bottom, #3a5a3a, #2a4a2a) !important;
    border-color: #66ff66 !important;
    color: #44ff44 !important;
}

/* Enhanced Adversary Drop Zone Styles */
.adversary-drop-zone {
    cursor: pointer;
    position: relative;
}

.adversary-drop-zone:hover {
    border-color: #888;
    background: rgba(255, 255, 255, 0.05);
}

.adversary-drop-zone .adversary-name {
    flex: 1;
    text-align: left;
    padding-right: 24px;
}

.adversary-drop-zone .clear-adversary-btn {
    flex-shrink: 0;
}
